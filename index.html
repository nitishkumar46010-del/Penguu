<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Quiet Penguin</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    background: #eef5fb;
    height: 100%;
    overflow: hidden;
    font-family: system-ui, sans-serif;
  }

  #ui {
    position: absolute;
    bottom: 8%;
    width: 100%;
    text-align: center;
    pointer-events: none;
  }

  .text {
    font-size: 18px;
    color: #333;
    margin-bottom: 14px;
    opacity: 0;
    transition: opacity 1s ease;
  }

  .buttons {
    pointer-events: auto;
  }

  button {
    padding: 10px 18px;
    margin: 6px;
    border-radius: 10px;
    border: none;
    font-size: 14px;
    background: #e3edf7;
    cursor: pointer;
    transition: transform .2s ease;
  }

  button:hover {
    transform: translateY(-2px);
  }

  .primary {
    background: #7fcfa2;
    color: white;
  }
</style>
</head>

<body>
<canvas id="c"></canvas>

<div id="ui">
  <div class="text" id="text"></div>
  <div class="buttons" id="buttons"></div>
</div>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener("resize", resize);
resize();

/* --- Penguin character --- */
const penguin = {
  x: -80,
  y: canvas.height * 0.6,
  targetX: canvas.width * 0.5,
  facing: 1,
  speed: 1.2,
  state: "walk",
  bob: 0
};

function drawPenguin(p) {
  ctx.save();
  ctx.translate(p.x, p.y);
  ctx.scale(p.facing, 1);

  // body
  ctx.fillStyle = "#222";
  ctx.beginPath();
  ctx.ellipse(0, 0, 28, 40, 0, 0, Math.PI * 2);
  ctx.fill();

  // belly
  ctx.fillStyle = "#fff";
  ctx.beginPath();
  ctx.ellipse(0, 8, 18, 24, 0, 0, Math.PI * 2);
  ctx.fill();

  // eyes
  ctx.fillStyle = "#fff";
  ctx.beginPath();
  ctx.arc(-8, -12, 3, 0, Math.PI * 2);
  ctx.arc(8, -12, 3, 0, Math.PI * 2);
  ctx.fill();

  // beak
  ctx.fillStyle = "#f4b400";
  ctx.beginPath();
  ctx.moveTo(0, -6);
  ctx.lineTo(6, -4);
  ctx.lineTo(0, -2);
  ctx.closePath();
  ctx.fill();

  ctx.restore();
}

/* --- Scene system --- */
let scene = 0;
const textEl = document.getElementById("text");
const buttonsEl = document.getElementById("buttons");

function showText(t, buttons = []) {
  textEl.style.opacity = 0;
  buttonsEl.innerHTML = "";
  setTimeout(() => {
    textEl.innerHTML = t;
    textEl.style.opacity = 1;
    buttons.forEach(b => {
      const btn = document.createElement("button");
      btn.textContent = b.label;
      if (b.primary) btn.classList.add("primary");
      btn.onclick = b.action;
      buttonsEl.appendChild(btn);
    });
  }, 600);
}

function nextScene() {
  scene++;

  if (scene === 1) {
    showText("Hi…", [
      { label: "You can stay", action: () => walkTo(0.55) }
    ]);
  }

  if (scene === 2) {
    showText("I wasn’t sure if I should come.", [
      { label: "It’s okay", action: () => walkTo(0.6) },
      { label: "Take your time", action: () => walkTo(0.6) }
    ]);
  }

  if (scene === 3) {
    showText("I made mistakes. I didn’t mean to hurt you.", [
      { label: "I know", action: () => walkTo(0.65) },
      { label: "I hear you", action: () => walkTo(0.65) }
    ]);
  }

  if (scene === 4) {
    showText("If it feels okay… would you like to be friends again?", [
      { label: "Yes", primary: true, action: () => ending(true) },
      { label: "I need time", action: () => ending(false) }
    ]);
  }
}

function walkTo(fraction) {
  penguin.targetX = canvas.width * fraction;
  penguin.facing = penguin.targetX > penguin.x ? 1 : -1;
  penguin.state = "walk";
}

function ending(yes) {
  buttonsEl.innerHTML = "";
  showText(
    yes
      ? "Thank you. I’ll try to do better."
      : "That’s okay. I’ll wait."
  );
}

/* --- Animation loop --- */
function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // background
  const grad = ctx.createLinearGradient(0, 0, 0, canvas.height);
  grad.addColorStop(0, "#f7fbff");
  grad.addColorStop(1, "#e3eef7");
  ctx.fillStyle = grad;
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // penguin movement
  if (penguin.state === "walk") {
    penguin.x += penguin.speed * penguin.facing;
    if (
      (penguin.facing === 1 && penguin.x >= penguin.targetX) ||
      (penguin.facing === -1 && penguin.x <= penguin.targetX)
    ) {
      penguin.state = "idle";
      nextScene();
    }
  } else {
    penguin.bob += 0.05;
  }

  drawPenguin(penguin);

  requestAnimationFrame(animate);
}

animate();
</script>
</body>
</html>
